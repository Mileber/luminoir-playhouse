import{d as N,a as h,o as Y,i as A,b as u,e as a,f as E,t as _,F as j,g as C,j as G,n as D,h as c,_ as X}from"./index-LnyyPkwa.js";const $={class:"game-2048"},B={class:"container"},F={class:"score"},U={class:"grid"},V={class:"button-container"},q={key:0,class:"game-over"},O={key:1,class:"win"},z=N({name:"GameTwentyFortyEight",__name:"Game2048",setup(I){const s=h([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),f=h(0),d=h(!1),v=h(!1),w=()=>{s.value=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f.value=0,d.value=!1,v.value=!1,m(),m()},m=()=>{const i=[];for(let e=0;e<4;e++){const n=s.value[e];if(n)for(let r=0;r<4;r++)n[r]===0&&i.push({row:e,col:r})}if(i.length===0)return;const t=i[Math.floor(Math.random()*i.length)],o=Math.random()<.9?2:4;if(t){const e=s.value[t.row];e&&(e[t.col]=o)}},l=i=>{if(d.value||v.value)return;let t=!1;switch(i){case"up":t=x();break;case"down":t=M();break;case"left":t=L();break;case"right":t=S();break}t&&(m(),T())},L=()=>{let i=!1;for(let t=0;t<4;t++){const o=s.value[t],e=o?o.filter(r=>r!==0):[];for(let r=0;r<e.length-1;r++)e[r]!==void 0&&e[r]===e[r+1]&&(e[r]=(e[r]||0)*2,f.value+=e[r]||0,e.splice(r+1,1));for(;e.length<4;)e.push(0);const n=s.value[t];if(n)for(let r=0;r<4;r++)n[r]!==e[r]&&(i=!0),n[r]=e[r]||0}return i},S=()=>{let i=!1;for(let t=0;t<4;t++){const o=s.value[t],e=o?o.filter(n=>n!==0):[];for(let n=e.length-1;n>0;n--)e[n]!==void 0&&e[n]===e[n-1]&&(e[n]=(e[n]||0)*2,f.value+=e[n]||0,e.splice(n-1,1),n--);for(;e.length<4;)e.unshift(0);for(let n=0;n<4;n++){const r=s.value[t];r&&r[n]!==e[n]&&(i=!0),r&&(r[n]=e[n]||0)}}return i},x=()=>{let i=!1;for(let t=0;t<4;t++){const o=[];for(let e=0;e<4;e++){const n=s.value[e];n&&n[t]!==0&&o.push(n[t]||0)}for(let e=0;e<o.length-1;e++)o[e]!==void 0&&o[e]===o[e+1]&&(o[e]=(o[e]||0)*2,f.value+=o[e]||0,o.splice(e+1,1));for(;o.length<4;)o.push(0);for(let e=0;e<4;e++){const n=s.value[e];n&&(n[t]!==o[e]&&(i=!0),n[t]=o[e]||0)}}return i},M=()=>{let i=!1;for(let t=0;t<4;t++){const o=[];for(let e=0;e<4;e++){const n=s.value[e];n&&n[t]!==0&&o.push(n[t]||0)}for(let e=o.length-1;e>0;e--)o[e]!==void 0&&o[e]===o[e-1]&&(o[e]=(o[e]||0)*2,f.value+=o[e]||0,o.splice(e-1,1),e--);for(;o.length<4;)o.unshift(0);for(let e=0;e<4;e++){const n=s.value[e];n&&(n[t]!==o[e]&&(i=!0),n[t]=o[e]||0)}}return i},T=()=>{for(let i=0;i<4;i++){const t=s.value[i];if(t){for(let o=0;o<4;o++)if(t[o]===2048){v.value=!0;return}}}for(let i=0;i<4;i++){const t=s.value[i];if(t){for(let o=0;o<4;o++)if(t[o]===0)return}}for(let i=0;i<4;i++){const t=s.value[i];if(t){for(let o=0;o<3;o++)if(t[o]!==void 0&&t[o+1]!==void 0&&t[o]===t[o+1])return}}for(let i=0;i<4;i++)for(let t=0;t<3;t++){const o=s.value[t],e=s.value[t+1];if(!(!o||!e)&&o[i]!==void 0&&e[i]!==void 0&&o[i]===e[i])return}d.value=!0},g=()=>{w()},p=i=>{switch(i.key){case"ArrowUp":l("up");break;case"ArrowDown":l("down");break;case"ArrowLeft":l("left");break;case"ArrowRight":l("right");break}};let k=0,b=0;const y=i=>{const t=i.touches[0];t&&(k=t.clientX,b=t.clientY)},R=i=>{if(d.value||v.value)return;const t=i.changedTouches[0];if(!t)return;const o=t.clientX,e=t.clientY,n=o-k,r=e-b;Math.abs(n)>Math.abs(r)?n>50?l("right"):n<-50&&l("left"):r>50?l("down"):r<-50&&l("up")};return Y(()=>{w(),window.addEventListener("keydown",p);const i=document.querySelector(".grid");i&&(i.addEventListener("touchstart",y),i.addEventListener("touchend",R))}),A(()=>{window.removeEventListener("keydown",p);const i=document.querySelector(".grid");i&&(i.removeEventListener("touchstart",y),i.removeEventListener("touchend",R))}),(i,t)=>(c(),u("div",$,[a("div",B,[t[6]||(t[6]=a("h1",null,"2048 Game",-1)),a("div",F,"Score: "+_(f.value),1),a("div",U,[(c(!0),u(j,null,C(s.value,(o,e)=>(c(),u("div",{key:e,class:"grid-row"},[(c(!0),u(j,null,C(o,(n,r)=>(c(),u("div",{key:r,class:D(["cell",{empty:n===0,"tile-2":n===2,"tile-4":n===4,"tile-8":n===8,"tile-16":n===16,"tile-32":n===32,"tile-64":n===64,"tile-128":n===128,"tile-256":n===256,"tile-512":n===512,"tile-1024":n===1024,"tile-2048":n===2048}])},_(n!==0?n:""),3))),128))]))),128))]),a("div",V,[a("button",{onClick:t[0]||(t[0]=o=>l("up")),class:"up-button"},"↑"),a("button",{onClick:t[1]||(t[1]=o=>l("left")),class:"left-button"},"←"),a("button",{onClick:t[2]||(t[2]=o=>l("right")),class:"right-button"},"→"),a("button",{onClick:t[3]||(t[3]=o=>l("down")),class:"down-button"},"↓")]),d.value?(c(),u("div",q,[t[4]||(t[4]=G(" Game Over! ",-1)),a("button",{onClick:g},"New Game")])):E("",!0),v.value?(c(),u("div",O,[t[5]||(t[5]=G(" You Win! ",-1)),a("button",{onClick:g},"New Game")])):E("",!0)])]))}}),W=X(z,[["__scopeId","data-v-67da233e"]]);export{W as default};
//# sourceMappingURL=Game2048-D3GTogO2.js.map
