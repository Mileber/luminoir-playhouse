import{d as d1,a as _,o as O1,b as O,e as l,f as L,t as f,l as f1,u as i,F as C,g as K,w as Q,n as V,h as k,_ as k1}from"./index-LnyyPkwa.js";const m1=[[[0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,5,1,12,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,7,1,0],[0,1,1,1,8,1,1,1,1,1,0],[0,1,13,1,1,1,1,1,14,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,1,1,3,1,3,1,0],[0,1,1,1,1,2,1,1,1,4,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,1,1,5,1,3,1,3,1,0],[0,1,7,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,6,1,5,1,0],[0,1,3,1,8,1,1,1,1,1,0],[0,1,1,1,1,1,3,1,7,1,0],[0,1,6,1,1,1,1,1,1,1,0],[0,1,1,1,3,1,3,1,3,1,0],[0,1,29,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,7,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,16,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,6,1,6,1,6,1,6,1,0],[0,1,1,28,28,28,28,28,1,1,0],[0,1,7,28,1,1,1,28,7,1,0],[0,1,1,28,9,1,1,28,1,1,0],[0,1,6,28,1,1,1,28,6,1,0],[0,1,1,28,28,28,28,28,1,1,0],[0,1,6,1,7,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,7,1,5,1,5,1,0],[0,1,30,1,1,15,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,24,1,1,1,25,1,1,0],[0,1,5,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,5,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,17,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,31,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,7,1,0],[0,1,32,1,10,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,7,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,26,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,6,1,6,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,7,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,7,1,5,1,5,1,0],[0,1,1,1,1,27,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,5,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,18,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,6,1,6,1,6,1,6,1,0],[0,1,1,20,1,1,1,21,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,7,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,7,1,0],[0,1,32,1,10,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,6,1,6,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,7,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,7,1,5,1,5,1,0],[0,1,22,1,1,23,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,5,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,19,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,6,1,6,1,6,1,6,1,0],[0,1,1,28,28,28,28,28,1,1,0],[0,1,7,28,1,1,1,28,7,1,0],[0,1,1,28,9,1,1,28,1,1,0],[0,1,6,28,1,1,1,28,6,1,0],[0,1,1,28,28,28,28,28,1,1,0],[0,1,6,1,7,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,5,1,5,1,5,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,5,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,31,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,6,1,6,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,7,1,1,1,1,1,7,1,0],[0,1,1,1,9,1,1,1,1,1,0],[0,1,6,1,1,1,1,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,6,1,7,1,6,1,6,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,0],[0,1,3,1,3,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,5,1,1,1,1,1,7,1,0],[0,1,32,1,10,1,1,1,1,1,0],[0,1,3,1,1,1,1,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,1,3,1,7,1,3,1,3,1,0],[0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0]]],p1={3:{name:"史莱姆",hp:50,attack:20,defense:5,gold:5,exp:10},4:{name:"骷髅战士",hp:100,attack:30,defense:10,gold:10,exp:20},5:{name:"蝙蝠",hp:70,attack:25,defense:8,gold:8,exp:15},6:{name:"法师",hp:80,attack:35,defense:12,gold:15,exp:25},7:{name:"石头人",hp:150,attack:40,defense:20,gold:20,exp:30},8:{name:"骑士",hp:200,attack:50,defense:25,gold:25,exp:35},9:{name:"恶魔",hp:250,attack:60,defense:30,gold:30,exp:40},10:{name:"魔龙",hp:500,attack:80,defense:40,gold:50,exp:60}},_1={1:{id:1,name:"寻找失踪的公主",description:"魔塔中的公主被魔王抓走了，请你找到她并解救她。",completed:!1,reward:{exp:100,gold:500}},2:{id:2,name:"收集神器",description:"收集5个神器碎片来合成强大的神器。",completed:!1,reward:{exp:200,gold:1e3}}};var I=(e=>(e[e.DEFAULT=1]="DEFAULT",e[e.QUEST_GIVER=2]="QUEST_GIVER",e[e.ITEM_GIVER=3]="ITEM_GIVER",e[e.MERCHANT=4]="MERCHANT",e[e.GUARD=5]="GUARD",e))(I||{});const E1={1:{name:"普通NPC",dialog:"你好，冒险者...",type:1},2:{name:"老法师",dialog:"年轻的勇者，我有一个重要的任务交给你...",quests:[1],type:2},3:{name:"神秘商人",dialog:"我这里有一些珍贵的物品，或许对你有帮助...",items:["luckyGold","cross"],type:3},4:{name:"武器大师",dialog:"我这里出售最好的武器和防具...",shopType:2,type:4},5:{name:"塔之守卫",dialog:"只有拥有足够实力的人才能继续前进...",requirement:{attack:100,defense:50},type:5}};var X=(e=>(e[e.NORMAL=1]="NORMAL",e[e.WEAPON=2]="WEAPON",e[e.MAGIC=3]="MAGIC",e[e.SPECIAL=4]="SPECIAL",e))(X||{});const R1={1:[{id:"redPotion",name:"红药水",price:20,type:"consumable"},{id:"bluePotion",name:"蓝药水",price:50,type:"consumable"},{id:"attackBoost",name:"攻击力+10",price:100,type:"enhancement"},{id:"defenseBoost",name:"防御力+10",price:100,type:"enhancement"}],2:[{id:"sword",name:"神剑",price:500,type:"weapon"},{id:"shield",name:"神盾",price:500,type:"armor"},{id:"cross",name:"十字架",price:1e3,type:"special"}],3:[{id:"iceMagic",name:"冰冻魔法",price:800,type:"magic"},{id:"fly",name:"飞行器",price:1200,type:"special"},{id:"holyWater",name:"圣水",price:1500,type:"consumable"}],4:[{id:"luckyGold",name:"幸运金币",price:2e3,type:"special"},{id:"earthquake",name:"地震卷轴",price:1800,type:"special"},{id:"monsterBook",name:"怪物手册",price:300,type:"special"}]},z={1:"普通商店",2:"武器商店",3:"魔法商店",4:"特殊商店"},L1=e=>z[e]||"商店",b1=e=>({1:"欢迎光临！请选择要购买的物品：",2:"这里有强大的武器和防具：",3:"神秘的魔法道具正在出售：",4:"稀有的特殊物品在这里可以找到："})[e]||"欢迎光临！请选择要购买的物品：";var o=(e=>(e[e.WALL=0]="WALL",e[e.FLOOR=1]="FLOOR",e[e.MONSTER=3]="MONSTER",e[e.STAIRS=4]="STAIRS",e[e.YELLOW_DOOR=5]="YELLOW_DOOR",e[e.BLUE_DOOR=6]="BLUE_DOOR",e[e.RED_DOOR=7]="RED_DOOR",e[e.SHOP=8]="SHOP",e[e.NPC=9]="NPC",e[e.RED_POTION=10]="RED_POTION",e[e.BLUE_POTION=11]="BLUE_POTION",e[e.YELLOW_KEY=12]="YELLOW_KEY",e[e.BLUE_KEY=13]="BLUE_KEY",e[e.RED_KEY=14]="RED_KEY",e[e.CROSS=15]="CROSS",e[e.FLY=16]="FLY",e[e.HOLY_WATER=17]="HOLY_WATER",e[e.LUCKY_GOLD=18]="LUCKY_GOLD",e[e.ICE_MAGIC=19]="ICE_MAGIC",e[e.SWORD=20]="SWORD",e[e.SHIELD=21]="SHIELD",e[e.UP_FLOOR=22]="UP_FLOOR",e[e.DOWN_FLOOR=23]="DOWN_FLOOR",e[e.PICKAXE=24]="PICKAXE",e[e.BOMB=25]="BOMB",e[e.EARTHQUAKE=26]="EARTHQUAKE",e[e.MONSTER_BOOK=27]="MONSTER_BOOK",e[e.DARK_WALL=28]="DARK_WALL",e[e.QUEST_NPC=29]="QUEST_NPC",e[e.ITEM_NPC=30]="ITEM_NPC",e[e.MERCHANT_NPC=31]="MERCHANT_NPC",e[e.GUARD_NPC=32]="GUARD_NPC",e))(o||{});const U=11,G=11,g1={redPotion:"红药水",bluePotion:"蓝药水",yellowKey:"黄钥匙",blueKey:"蓝钥匙",redKey:"红钥匙",cross:"十字架",upFloor:"上楼器",downFloor:"下楼器",fly:"飞行器",pickaxe:"铁镐",bomb:"炸弹",holyWater:"圣水",luckyGold:"幸运金币",iceMagic:"冰冻魔法",earthquake:"地震卷轴",monsterBook:"怪物手册",sword:"神剑",shield:"神盾"},y1={[o.CROSS]:"cross",[o.FLY]:"fly",[o.HOLY_WATER]:"holyWater",[o.LUCKY_GOLD]:"luckyGold",[o.ICE_MAGIC]:"iceMagic",[o.SWORD]:"sword",[o.SHIELD]:"shield",[o.UP_FLOOR]:"upFloor",[o.DOWN_FLOOR]:"downFloor",[o.PICKAXE]:"pickaxe",[o.BOMB]:"bomb",[o.EARTHQUAKE]:"earthquake",[o.MONSTER_BOOK]:"monsterBook"},h1={class:"magic-tower"},M1={class:"game-container"},C1={class:"status-panel"},K1={class:"player-stats"},A1={class:"stat"},P1={class:"value"},w1={class:"stat"},D1={class:"value"},I1={class:"stat"},N1={class:"value"},S1={class:"stat"},x1={class:"value"},W1={class:"stat"},B1={class:"value"},F1={class:"stat"},U1={class:"value"},G1={class:"stat"},H1={class:"value"},Y1={class:"inventory"},$1={class:"items"},q1={class:"item"},Q1={class:"item"},V1={class:"item"},X1={key:0,class:"item"},z1={key:3,class:"item"},j1={key:4,class:"item"},J1={key:5,class:"item"},Z1={class:"game-area"},T1={key:0,class:"controls"},e0={class:"map-container"},a0={key:0,class:"player"},s0={key:1,class:"monster"},o0={key:2,class:"shop-icon"},l0={key:3,class:"npc-info"},t0={class:"messages"},n0={class:"dialog-content"},u0={key:0,class:"dialog-options"},r0=["onClick"],c0={class:"dialog-content"},v0={class:"shop-items"},i0=["onClick"],d0={class:"shop-types"},O0=["onClick"],f0=d1({__name:"MagicTower",setup(e){const m=_(m1),H=_(p1),N=_(_1),j=_(E1),J=_(R1),Z=_(z),T=d=>L1(d),e1=d=>b1(d),g=_(X.NORMAL),a=_({x:0,y:0,hp:1e3,maxHp:1e3,attack:10,defense:10,gold:0,exp:0,level:1,floor:0}),t=_({redPotion:0,bluePotion:0,yellowKey:0,blueKey:0,redKey:0,cross:0,upFloor:0,downFloor:0,fly:0,pickaxe:0,bomb:0,holyWater:0,luckyGold:0,iceMagic:0,earthquake:0,monsterBook:0,sword:0,shield:0}),A=_([]),P=_(!1),y=_(""),S=_([]),B=_(!1),Y=_(!1),c=d=>{A.value.push(d),A.value.length>5&&A.value.shift()},a1=()=>{a.value.x=5,a.value.y=9,a.value.floor=0,a.value.hp=1e3,a.value.maxHp=1e3,a.value.attack=10,a.value.defense=10,a.value.gold=0,a.value.exp=0,a.value.level=1,t.value.redPotion=0,t.value.bluePotion=0,t.value.yellowKey=0,t.value.blueKey=0,t.value.redKey=0,A.value=[],c("欢迎来到魔塔！使用方向键移动。"),Y.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},b=(d,s)=>{const u=a.value.x+d,r=a.value.y+s;if(u<0||u>=U||r<0||r>=G)return;const n=m.value[a.value.floor];if(!n)return;const p=n[r];if(!p)return;const E=p[u];if(E!==void 0){switch(E){case o.WALL:c("无法通过墙壁");return;case o.YELLOW_DOOR:if(t.value.yellowKey>0){t.value.yellowKey--;const v=m.value[a.value.floor];if(v){const R=v[r];R&&(R[u]=o.FLOOR)}c("使用黄钥匙打开了门")}else{c("需要黄钥匙才能打开这扇门");return}break;case o.BLUE_DOOR:if(t.value.blueKey>0){t.value.blueKey--;const v=m.value[a.value.floor];if(v){const R=v[r];R&&(R[u]=o.FLOOR)}c("使用蓝钥匙打开了门")}else{c("需要蓝钥匙才能打开这扇门");return}break;case o.RED_DOOR:if(t.value.redKey>0){t.value.redKey--;const v=m.value[a.value.floor];if(v){const R=v[r];R&&(R[u]=o.FLOOR)}c("使用红钥匙打开了门")}else{c("需要红钥匙才能打开这扇门");return}break;case 4:u===1&&r===1?a.value.floor<m.value.length-1&&(a.value.floor++,a.value.x=1,a.value.y=1,c(`来到${a.value.floor+1}F`)):u===9&&r===9&&a.value.floor>0&&(a.value.floor--,a.value.x=9,a.value.y=9,c(`来到${a.value.floor+1}F`));return;case o.NPC:u1(E);return;case o.RED_POTION:t.value.redPotion++;const w=m.value[a.value.floor];if(w){const v=w[r];v&&(v[u]=o.FLOOR)}c("获得了红药水");return;case o.BLUE_POTION:t.value.bluePotion++;const F=m.value[a.value.floor];if(F){const v=F[r];v&&(v[u]=o.FLOOR)}c("获得了蓝药水");return;case o.YELLOW_KEY:t.value.yellowKey++;const D=m.value[a.value.floor];if(D){const v=D[r];v&&(v[u]=o.FLOOR)}c("获得了黄钥匙");return;case o.BLUE_KEY:t.value.blueKey++;const h=m.value[a.value.floor];if(h){const v=h[r];v&&(v[u]=o.FLOOR)}c("获得了蓝钥匙");return;case o.RED_KEY:t.value.redKey++;const M=m.value[a.value.floor];if(M){const v=M[r];v&&(v[u]=o.FLOOR)}c("获得了红钥匙");return;case o.CROSS:case o.FLY:case o.HOLY_WATER:case o.LUCKY_GOLD:case o.ICE_MAGIC:case o.SWORD:case o.SHIELD:case o.UP_FLOOR:case o.DOWN_FLOOR:case o.PICKAXE:case o.BOMB:case o.EARTHQUAKE:case o.MONSTER_BOOK:{const v=y1[E];if(v){t.value[v]=(t.value[v]||0)+1;const R=m.value[a.value.floor];if(R){const q=R[r];q&&(q[u]=o.FLOOR)}const i1=g1[v];c(`获得了${i1}`)}return}case o.DARK_WALL:if(t.value.pickaxe>0||t.value.bomb>0){c("使用工具破坏了暗墙"),t.value.pickaxe>0?t.value.pickaxe--:t.value.bomb--;const v=m.value[a.value.floor];if(v){const R=v[r];R&&(R[u]=o.FLOOR)}}else{c("需要工具才能破坏这面暗墙");return}break;case o.MONSTER:s1(E);return}a.value.x=u,a.value.y=r,l1()}},s1=d=>{const s=m.value[a.value.floor],u=a.value.y,r=a.value.x,n=H.value[d],p=a.value.attack,E=a.value.defense,w=t.value.cross>0?2:1;if(p*w<=n.defense){c(`无法对${n.name}造成伤害！`);return}let D=Math.ceil(n.hp/(p*w-n.defense));n.attack>E&&(D=Math.ceil(a.value.hp/(n.attack-E)));const h=D*Math.max(0,n.attack-E);if(h>=a.value.hp){c(`你无法击败${n.name}，因为你会在战斗中死亡！`);return}let M=n.gold;if(t.value.luckyGold>0&&(M*=2),a.value.hp-=h,a.value.gold+=M,a.value.exp+=n.exp,c(`击败了${n.name}，损失${h}点生命值，获得${M}金币和${n.exp}经验`),s){const v=s[u];v&&(v[r]=o.FLOOR)}o1()},o1=()=>{a.value.exp>=a.value.level*100&&(a.value.level++,a.value.maxHp+=200,a.value.hp=a.value.maxHp,a.value.attack+=5,a.value.defense+=3,c(`升级了！现在是${a.value.level}级`))},l1=()=>{if(a.value.floor===m.value.length-1){const d=m.value[a.value.floor];let s=!1;if(d)for(let u=0;u<d.length;u++){const r=d[u];if(r){for(let n=0;n<r.length;n++)if(r[n]===o.MONSTER){s=!0;break}}if(s)break}s||(c("恭喜你！击败了最终BOSS，完成了魔塔挑战！"),c("你成功完成了整个魔塔的冒险！"))}},$=()=>{B.value=!1},t1=d=>{g.value=d},n1=d=>{if(a.value.gold>=d.price){switch(a.value.gold-=d.price,d.id){case"redPotion":t.value.redPotion++;break;case"bluePotion":t.value.bluePotion++;break;case"yellowKey":t.value.yellowKey++;break;case"blueKey":t.value.blueKey++;break;case"redKey":t.value.redKey++;break;case"sword":a.value.attack+=10;break;case"shield":a.value.defense+=10;break;case"cross":t.value.cross++;break;case"iceMagic":t.value.iceMagic++;break;case"fly":t.value.fly++;break;case"holyWater":t.value.holyWater++;break;case"luckyGold":t.value.luckyGold++;break;case"earthquake":t.value.earthquake++;break;case"monsterBook":t.value.monsterBook++;break}c(`购买了${d.name}`)}else c("金币不足！")},u1=d=>{const s=j.value[d];if(s)switch(s.type){case I.QUEST_GIVER:const u=s;if(u.quests&&u.quests.length>0){const E=u.quests[0];E!==void 0&&(S.value=[{text:"接受任务",action:()=>r1(E)},{text:"询问详情",action:()=>c1(E)},{text:"离开",action:W}])}y.value=s.dialog,P.value=!0;break;case I.ITEM_GIVER:const r=s;if(r.items&&r.items.length>0)switch(r.items[0]){case"luckyGold":a.value.gold+=500,c("获得了幸运金币，金币+500");break;case"cross":t.value.cross+=1,c("获得了十字架");break}y.value=s.dialog,P.value=!0;break;case I.MERCHANT:const n=s;n.shopType!==void 0&&(g.value=n.shopType,B.value=!0);break;case I.GUARD:const p=s;p.requirement&&a.value.attack>=p.requirement.attack&&a.value.defense>=p.requirement.defense?c("守卫让你通过了"):c("守卫拦住了你，你的实力还不够");break;default:y.value=s.dialog,P.value=!0;break}},r1=d=>{const s=d.toString();if(s in N.value){const u=N.value[s];c(`接受了任务：${u.name}`)}W()},c1=d=>{const s=d.toString();if(s in N.value){const u=N.value[s];y.value=u.description}},x=d=>{switch(d){case"redPotion":t.value.redPotion>0&&(t.value.redPotion--,a.value.hp=Math.min(a.value.hp+200,a.value.maxHp),c("使用了红药水，恢复200点生命值"));break;case"bluePotion":t.value.bluePotion>0&&(t.value.bluePotion--,a.value.hp=Math.min(a.value.hp+500,a.value.maxHp),c("使用了蓝药水，恢复500点生命值"));break;case"fly":t.value.fly>0&&(t.value.fly--,a.value.x=U-1-a.value.x,a.value.y=G-1-a.value.y,c("使用了飞行器，传送到对称位置"));break;case"holyWater":t.value.holyWater>0&&(t.value.holyWater--,a.value.maxHp*=2,a.value.hp=a.value.maxHp,c("使用了圣水，生命值上限翻倍"));break;case"luckyGold":t.value.luckyGold>0&&(t.value.luckyGold--,a.value.gold+=1e3,c("使用了幸运金币，获得1000金币"));break}},W=()=>{P.value=!1,y.value="",S.value=[]},v1=d=>{switch(d.key){case"ArrowUp":b(0,-1);break;case"ArrowDown":b(0,1);break;case"ArrowLeft":b(-1,0);break;case"ArrowRight":b(1,0);break}};return O1(()=>{a1(),window.addEventListener("keydown",v1)}),(d,s)=>(k(),O("div",h1,[l("div",M1,[l("div",C1,[l("div",K1,[s[17]||(s[17]=l("h3",null,"角色状态",-1)),l("div",A1,[s[10]||(s[10]=l("span",{class:"label"},"生命值:",-1)),l("span",P1,f(a.value.hp)+"/"+f(a.value.maxHp),1)]),l("div",w1,[s[11]||(s[11]=l("span",{class:"label"},"攻击力:",-1)),l("span",D1,f(a.value.attack),1)]),l("div",I1,[s[12]||(s[12]=l("span",{class:"label"},"防御力:",-1)),l("span",N1,f(a.value.defense),1)]),l("div",S1,[s[13]||(s[13]=l("span",{class:"label"},"金币:",-1)),l("span",x1,f(a.value.gold),1)]),l("div",W1,[s[14]||(s[14]=l("span",{class:"label"},"经验:",-1)),l("span",B1,f(a.value.exp),1)]),l("div",F1,[s[15]||(s[15]=l("span",{class:"label"},"等级:",-1)),l("span",U1,f(a.value.level),1)]),l("div",G1,[s[16]||(s[16]=l("span",{class:"label"},"楼层:",-1)),l("span",H1,f(a.value.floor+1),1)])]),l("div",Y1,[s[29]||(s[29]=l("h3",null,"道具",-1)),l("div",$1,[l("div",{class:"item",onClick:s[0]||(s[0]=u=>x("redPotion"))},[s[18]||(s[18]=l("span",null,"红药水",-1)),l("span",null,f(t.value.redPotion),1)]),l("div",{class:"item",onClick:s[1]||(s[1]=u=>x("bluePotion"))},[s[19]||(s[19]=l("span",null,"蓝药水",-1)),l("span",null,f(t.value.bluePotion),1)]),l("div",q1,[s[20]||(s[20]=l("span",null,"黄钥匙",-1)),l("span",null,f(t.value.yellowKey),1)]),l("div",Q1,[s[21]||(s[21]=l("span",null,"蓝钥匙",-1)),l("span",null,f(t.value.blueKey),1)]),l("div",V1,[s[22]||(s[22]=l("span",null,"红钥匙",-1)),l("span",null,f(t.value.redKey),1)]),t.value.iceMagic>0?(k(),O("div",X1,[s[23]||(s[23]=l("span",null,"冰冻魔法",-1)),l("span",null,f(t.value.iceMagic),1)])):L("",!0),t.value.fly>0?(k(),O("div",{key:1,class:"item",onClick:s[2]||(s[2]=u=>x("fly"))},[s[24]||(s[24]=l("span",null,"飞行器",-1)),l("span",null,f(t.value.fly),1)])):L("",!0),t.value.holyWater>0?(k(),O("div",{key:2,class:"item",onClick:s[3]||(s[3]=u=>x("holyWater"))},[s[25]||(s[25]=l("span",null,"圣水",-1)),l("span",null,f(t.value.holyWater),1)])):L("",!0),t.value.luckyGold>0?(k(),O("div",z1,[s[26]||(s[26]=l("span",null,"幸运金币",-1)),l("span",null,f(t.value.luckyGold),1)])):L("",!0),t.value.earthquake>0?(k(),O("div",j1,[s[27]||(s[27]=l("span",null,"地震卷轴",-1)),l("span",null,f(t.value.earthquake),1)])):L("",!0),t.value.monsterBook>0?(k(),O("div",J1,[s[28]||(s[28]=l("span",null,"怪物手册",-1)),l("span",null,f(t.value.monsterBook),1)])):L("",!0)])])]),l("div",Z1,[Y.value?(k(),O("div",T1,[l("button",{onClick:s[4]||(s[4]=u=>b(0,-1))},"↑"),l("div",null,[l("button",{onClick:s[5]||(s[5]=u=>b(-1,0))},"←"),l("button",{onClick:s[6]||(s[6]=u=>b(1,0))},"→")]),l("button",{onClick:s[7]||(s[7]=u=>b(0,1))},"↓")])):L("",!0),l("div",e0,[l("div",{class:"map",style:f1({gridTemplateColumns:`repeat(${i(U)}, 40px)`,gridTemplateRows:`repeat(${i(G)}, 40px)`})},[(k(!0),O(C,null,K(m.value[a.value.floor],(u,r)=>(k(),O("div",{key:r,class:"row"},[(k(!0),O(C,null,K(u,(n,p)=>(k(),O("div",{key:p,class:V(["cell",{wall:n===i(o).WALL,floor:n===i(o).FLOOR,stairUp:n===4&&p===9&&r===9,stairDown:n===4&&p===1&&r===1,yellowDoor:n===i(o).YELLOW_DOOR,blueDoor:n===i(o).BLUE_DOOR,redDoor:n===i(o).RED_DOOR,shop:n===i(o).SHOP,redPotion:n===i(o).RED_POTION,bluePotion:n===i(o).BLUE_POTION,yellowKey:n===i(o).YELLOW_KEY,blueKey:n===i(o).BLUE_KEY,redKey:n===i(o).RED_KEY,cross:n===i(o).CROSS,fly:n===i(o).FLY,holyWater:n===i(o).HOLY_WATER,luckyGold:n===i(o).LUCKY_GOLD,iceMagic:n===i(o).ICE_MAGIC,sword:n===i(o).SWORD,shield:n===i(o).SHIELD,upFloor:n===i(o).UP_FLOOR,downFloor:n===i(o).DOWN_FLOOR,pickaxe:n===i(o).PICKAXE,bomb:n===i(o).BOMB,earthquake:n===i(o).EARTHQUAKE,monsterBook:n===i(o).MONSTER_BOOK,darkWall:n===i(o).DARK_WALL,monster:n===i(o).MONSTER,npc:n===i(o).NPC,player:a.value.x===p&&a.value.y===r}])},[a.value.x===p&&a.value.y===r?(k(),O("div",a0,"-hero-")):n===i(o).MONSTER?(k(),O("div",s0,f(H.value[n]?.name||"怪物"),1)):n===i(o).SHOP?(k(),O("div",o0,"S")):n===i(o).NPC?(k(),O("div",l0," NPC ")):L("",!0)],2))),128))]))),128))],4)]),l("div",t0,[(k(!0),O(C,null,K(A.value,(u,r)=>(k(),O("div",{key:r,class:"message"},f(u),1))),128))])])]),P.value?(k(),O("div",{key:0,class:"dialog-overlay",onClick:W},[l("div",{class:"dialog",onClick:s[8]||(s[8]=Q(()=>{},["stop"]))},[l("div",n0,[s[30]||(s[30]=l("h3",null,"对话",-1)),l("p",null,f(y.value),1),S.value.length>0?(k(),O("div",u0,[(k(!0),O(C,null,K(S.value,(u,r)=>(k(),O("button",{key:r,onClick:()=>{u.action&&u.action()}},f(u.text),9,r0))),128))])):(k(),O("button",{key:1,onClick:W},"确定"))])])])):L("",!0),B.value?(k(),O("div",{key:1,class:"dialog-overlay",onClick:$},[l("div",{class:"dialog",onClick:s[9]||(s[9]=Q(()=>{},["stop"]))},[l("div",c0,[l("h3",null,f(T(g.value)),1),l("p",null,f(e1(g.value)),1),l("div",v0,[(k(!0),O(C,null,K(J.value[g.value],(u,r)=>(k(),O("div",{key:r,class:"shop-item"},[l("span",null,f(u.name)+" ("+f(u.price)+"金币)",1),l("button",{onClick:n=>n1(u)},"购买",8,i0)]))),128))]),l("div",d0,[(k(!0),O(C,null,K(Z.value,(u,r)=>(k(),O("button",{key:r,class:V({active:g.value===Number(r)}),onClick:n=>t1(Number(r))},f(u),11,O0))),128))]),l("button",{onClick:$},"关闭商店")])])])):L("",!0)]))}}),m0=k1(f0,[["__scopeId","data-v-1f4e850d"]]);export{m0 as default};
//# sourceMappingURL=MagicTower-BXVupYsQ.js.map
