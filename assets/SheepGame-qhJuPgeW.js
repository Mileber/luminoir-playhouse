import{d as j,a as d,c as P,o as L,b as i,e as a,f as g,t as f,F as y,g as b,l as V,n as M,h as c,_ as W}from"./index-LnyyPkwa.js";const D={class:"sheep-game"},I={class:"game-header"},K={class:"game-info"},Y={class:"score"},$={class:"game-container"},q={class:"game-board"},H=["onClick"],J={class:"slot-area"},Q={class:"slots"},R={class:"slot-info"},U={key:0,class:"game-over-overlay"},X={class:"game-over-message"},Z={key:1,class:"instructions"},x=j({__name:"SheepGame",setup(z){const m=["🍓","🍊","🍇","🍉","🍌","🍎","🍑","🐶","🐱","🐭","🐹","🐰","🦊","🐻","🚗","🚕","🚙","🚌","🚎","🏎","🚓"],u=d([]),v=d(Array(7).fill(null)),B=d([]),C=d(0),h=d(!1),p=d(!1),T=P(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),E=P(()=>v.value.filter(s=>s!==null).length),S=()=>{const s=[],e=[];for(let n=0;n<3;n++){const o=[];for(let r=0;r<3;r++)o.push(Math.floor(Math.random()*m.length));e.push(o)}s.push(e);const l=[];for(let n=0;n<3;n++){const o=[];for(let r=0;r<3;r++)Math.random()>.3?o.push(Math.floor(Math.random()*m.length)):o.push(null);l.push(o)}s.push(l);const t=[];for(let n=0;n<5;n++){const o=[];for(let r=0;r<5;r++)n>=1&&n<=2&&r>=1&&r<=2?o.push(Math.floor(Math.random()*m.length)):o.push(null);t.push(o)}s.push(t),u.value=s,v.value=Array(7).fill(null),B.value=[],C.value=0,h.value=!1,p.value=!1},w=(s,e,l)=>{if(l===u.value.length-1)return u.value[l]?.[e]?.[s]!==null;for(let t=l+1;t<u.value.length;t++)if(u.value[t]?.[e]?.[s]!==void 0&&u.value[t]?.[e]?.[s]!==null)return!1;return u.value[l]?.[e]?.[s]!==null},F=(s,e,l)=>{if(h.value||!w(s,e,l)||!u.value[l]||!u.value[l][e])return;const t=u.value[l][e][s];if(t===null)return;if(E.value>=7&&(O(),E.value>=7)){h.value=!0,p.value=!1;return}const n=v.value.findIndex(o=>o===null);n!==-1&&t!==null&&t!==void 0&&(v.value[n]=t,B.value.push({x:s,y:e,z:l}),u.value[l]&&u.value[l][e]&&(u.value[l][e][s]=null),O(),N())},O=()=>{const s={};v.value.forEach(e=>{e!==null&&(s[e]?s[e]++:s[e]=1)});for(const[e,l]of Object.entries(s)){const t=parseInt(e);if(l>=3){let n=0;for(let o=0;o<v.value.length&&n<3;o++)v.value[o]===t&&(v.value[o]=null,n++);C.value+=300}}},N=()=>{u.value.every(e=>e.every(l=>l.every(t=>t===null)))&&(h.value=!0,p.value=!0)},A=s=>m[s]||"🧩",G=()=>{S()};return L(()=>{S()}),(s,e)=>(c(),i("div",D,[a("div",I,[e[0]||(e[0]=a("h1",null,"羊了个羊",-1)),a("div",K,[a("div",Y,"得分: "+f(C.value),1),a("button",{onClick:G,class:"reset-btn"},"重新开始")])]),a("div",$,[a("div",q,[(c(!0),i(y,null,b(u.value,(l,t)=>(c(),i("div",{key:t,class:"board-layer",style:V({zIndex:t})},[(c(!0),i(y,null,b(l,(n,o)=>(c(),i("div",{key:o,class:"board-row"},[(c(!0),i(y,null,b(n,(r,_)=>(c(),i("div",{key:_,class:M(["board-cell",{"has-block":r!==null,"top-block":w(_,o,t),selected:B.value.some(k=>k.x===_&&k.y===o&&k.z===t)}]),onClick:k=>F(_,o,t)},[r!==null?(c(),i("div",{key:0,class:M(["block","block-"+r])},f(A(r)),3)):g("",!0)],10,H))),128))]))),128))],4))),128))]),a("div",J,[e[1]||(e[1]=a("h3",null,"槽位",-1)),a("div",Q,[(c(!0),i(y,null,b(v.value,(l,t)=>(c(),i("div",{key:t,class:M(["slot",{filled:l!==null}])},[l!==null?(c(),i("div",{key:0,class:M(["block","block-"+l])},f(A(l)),3)):g("",!0)],2))),128))]),a("div",R,[a("p",null,"剩余空间: "+f(7-E.value)+" / 7",1)])])]),h.value?(c(),i("div",U,[a("div",X,[a("h2",null,f(p.value?"恭喜通关!":"游戏结束"),1),a("p",null,f(p.value?"你成功消除了所有方块！":"槽位已满，游戏结束。"),1),a("button",{onClick:G},"再玩一次")])])):g("",!0),T.value?(c(),i("div",Z,[...e[2]||(e[2]=[a("p",null,"点击最上层的方块将其移至底部槽位，三个相同图案可消除",-1)])])):g("",!0)]))}}),le=W(x,[["__scopeId","data-v-cb290e51"]]);export{le as default};
//# sourceMappingURL=SheepGame-qhJuPgeW.js.map
