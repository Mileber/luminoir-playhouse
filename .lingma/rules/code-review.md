# 代码审查规则

## 概述

本规则定义了项目代码审查的标准和流程，确保代码质量和一致性。审查将涵盖功能实现、代码质量、安全性和可维护性等方面。

## 审查清单

### 1. 代码质量和规范

- [ ] 是否遵循项目的ESLint和Prettier配置
- [ ] TypeScript类型是否正确使用，避免使用any类型
- [ ] 代码是否符合项目编码规范
- [ ] 组件命名、文件命名是否符合规范
- [ ] 是否存在未使用的导入或变量
- [ ] 代码是否通过TypeScript类型检查

### 2. Vue 3组件审查要点

- [ ] 是否正确使用Composition API
- [ ] 响应式数据使用是否合理（ref/reactive）
- [ ] 组件生命周期使用是否恰当
- [ ] 组件是否遵循单一职责原则
- [ ] props和emit使用是否规范
- [ ] 组件是否正确定义和使用插槽(slot)
- [ ] 组件是否正确处理响应式更新
- [ ] 模板中绑定的方法名与脚本中定义的方法名是否一致

### 3. 路由和状态管理

- [ ] 路由配置是否合理
- [ ] 状态管理使用是否规范
- [ ] 权限控制逻辑是否完善

### 4. API和服务层

- [ ] API调用是否统一管理
- [ ] 错误处理机制是否完善
- [ ] 异步操作是否正确处理
- [ ] 是否正确处理API响应和错误情况
- [ ] 是否对用户输入进行了适当的验证和净化

### 5. 性能优化

- [ ] 是否存在不必要的重渲染
- [ ] 大型组件是否需要代码分割
- [ ] 图片和资源是否正确优化
- [ ] 是否合理使用了懒加载和异步组件
- [ ] 是否存在可能导致内存泄漏的代码

### 6. 安全性

- [ ] 用户输入是否正确验证和净化
- [ ] 敏感信息是否正确处理
- [ ] XSS和CSRF防护措施是否到位
- [ ] 环境变量是否正确定义和使用

### 7. 可维护性

- [ ] 组件是否职责单一
- [ ] 代码注释是否清晰完整
- [ ] 是否存在重复代码需要重构
- [ ] 函数是否遵循单一职责原则，避免过长函数体
- [ ] 是否使用了具有描述性的变量名
- [ ] 复杂逻辑是否已拆分为多个小函数

### 8. 测试相关

- [ ] 是否有足够的单元测试
- [ ] E2E测试是否覆盖主要功能流程
- [ ] 测试用例的质量和覆盖率是否满足要求
- [ ] 是否对关键业务逻辑编写了测试用例

## 审查流程

1. 获取最新代码并理解变更内容
2. 逐项检查上述审查清单
3. 记录发现的问题和改进建议
4. 与开发人员沟通发现的问题
5. 跟踪问题修复进度
6. 生成最终审查报告（Markdown和HTML两种格式）
7. 将报告保存到项目中的指定位置

## 报告生成和存储规范

### 报告格式要求

审查完成后必须生成两种格式的报告：

1. Markdown格式报告（.md）
2. HTML格式报告（.html）

### 报告存储位置

所有生成的审查报告必须存储在以下目录中：

- 项目根目录下的 `reports/code-review/` 文件夹

### 报告命名规范

报告文件命名应遵循以下格式：

```
code-review-report-YYYYMMDD-HHMMSS.md
code-review-report-YYYYMMDD-HHMMSS.html
```

### 报告模板

```markdown
### 代码审查报告

**项目名称**: Luminoir Playhouse
**审查日期**: YYYY-MM-DD
**审查人员**: [审查人员姓名]
**提交分支**: [分支名称]
**提交哈希**: [commit hash]

### 1. 概述

[简要描述本次审查的范围和重点]

### 2. 发现的问题

| 问题编号 | 问题类型 | 严重程度 | 文件位置 | 问题描述 | 改进建议 |
|---------|---------|---------|---------|---------|----------|
| 1 | [功能/性能/安全等] | [高/中/低] | [文件路径:行号] | [问题详细描述] | [具体改进建议] |

### 3. 优秀实践

[列出代码中值得推广的优秀实践]

### 4. 统计数据

- 审查文件数: [数量]
- 发现问题数: [数量]
- 高优先级问题: [数量]
- 中优先级问题: [数量]
- 低优先级问题: [数量]

### 5. 结论

[总体评价和是否通过审查的建议]

### 6. 后续步骤

[需要采取的行动项和负责人]
```